<Window x:Class="Sem_Projec.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Big-O Analyzer"
        Height="657"
        Width="820"
        WindowStartupLocation="CenterScreen"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        Background="{DynamicResource WindowBackground}"
        Icon="icon.ico">

    <Window.Resources>
        <!-- Colors (declare Color resources so animations can target Color values directly) -->
        <Color x:Key="WindowBackgroundColor">#F0F2F5</Color>
        <Color x:Key="TextBoxBackgroundColor">#FFFFFFFF</Color>
        <Color x:Key="TextBoxForegroundColor">#FF000000</Color>
        <Color x:Key="TextBoxBorderColor">#FFDDDDDD</Color>
        <Color x:Key="AccentColor">#FF0078D7</Color>
        <Color x:Key="AccentDarkColor">#FF005A9E</Color>
        <Color x:Key="TitleForegroundColor">#FF111111</Color>

        <!-- Brushes built from Colors -->
        <SolidColorBrush x:Key="WindowBackground" Color="{StaticResource WindowBackgroundColor}"/>
        <SolidColorBrush x:Key="TextBoxBackground" Color="{StaticResource TextBoxBackgroundColor}"/>
        <SolidColorBrush x:Key="TextBoxForeground" Color="{StaticResource TextBoxForegroundColor}"/>
        <SolidColorBrush x:Key="TextBoxBorder" Color="{StaticResource TextBoxBorderColor}"/>
        <SolidColorBrush x:Key="ButtonBackground" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="ButtonBackgroundChecked" Color="{StaticResource AccentDarkColor}"/>
        <SolidColorBrush x:Key="ButtonForeground" Color="White"/>
        <SolidColorBrush x:Key="TitleForeground" Color="{StaticResource TitleForegroundColor}"/>

        <!-- Toggle background (updated from code-behind) -->
        <SolidColorBrush x:Key="ToggleBackground" Color="{StaticResource AccentColor}"/>

        <!-- TextBox Style -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="{DynamicResource TextBoxBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBoxForeground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource TextBoxBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <!-- Button Style with Hover Animation and subtle scale -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource ButtonBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ButtonForeground}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Width" Value="160"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="12,6"
                                SnapsToDevicePixels="True">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <EventTrigger RoutedEvent="MouseEnter">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="border"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="{StaticResource AccentDarkColor}"
                                                        Duration="0:0:0.18"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleX)"
                                                         To="1.03" Duration="0:0:0.12"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleY)"
                                                         To="1.03" Duration="0:0:0.12"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>

                            <EventTrigger RoutedEvent="MouseLeave">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="border"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="{StaticResource AccentColor}"
                                                        Duration="0:0:0.18"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleX)"
                                                         To="1" Duration="0:0:0.12"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleY)"
                                                         To="1" Duration="0:0:0.12"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>

                            <!-- Pressed feedback -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ToggleButton style that uses ToggleBackground (no bindings in animations) -->
        <Style TargetType="ToggleButton">
            <Setter Property="Background" Value="{DynamicResource ToggleBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ButtonForeground}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Width" Value="100"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="8,4"
                                SnapsToDevicePixels="True">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>

                            <Grid>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock x:Name="SunIcon" Text="☀" FontSize="14" Margin="0,0,6,0" Opacity="0"/>
                                    <TextBlock x:Name="MoonIcon" Text="🌙" FontSize="14" Margin="0,0,6,0" Opacity="1"/>
                                    <ContentPresenter x:Name="contentPresenter"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <ControlTemplate.Triggers>
                            <EventTrigger RoutedEvent="MouseEnter">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="border"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="{StaticResource AccentDarkColor}"
                                                        Duration="0:0:0.14"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleX)"
                                                         To="1.02" Duration="0:0:0.12"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleY)"
                                                         To="1.02" Duration="0:0:0.12"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>

                            <EventTrigger RoutedEvent="MouseLeave">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="border"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="{StaticResource AccentColor}"
                                                        Duration="0:0:0.14"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleX)"
                                                         To="1" Duration="0:0:0.12"/>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="(Border.RenderTransform).(ScaleTransform.ScaleY)"
                                                         To="1" Duration="0:0:0.12"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>

                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource ButtonBackgroundChecked}"/>
                                <Setter TargetName="SunIcon" Property="Opacity" Value="1"/>
                                <Setter TargetName="MoonIcon" Property="Opacity" Value="0"/>
                            </Trigger>

                            <Trigger Property="IsChecked" Value="False">
                                <Setter TargetName="SunIcon" Property="Opacity" Value="0"/>
                                <Setter TargetName="MoonIcon" Property="Opacity" Value="1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid Margin="20" SnapsToDevicePixels="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="180"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>

        <!-- Title -->
        <TextBlock Text="Big-O Code Analyzer"
               FontSize="26"
               FontWeight="Bold"
               Foreground="{DynamicResource TitleForeground}"
               VerticalAlignment="Center"
               Grid.Row="0"
               Grid.Column="0"/>

        <!-- Theme Toggle -->
        <ToggleButton x:Name="ThemeToggle"
                  Content="Dark Mode"
                  Width="152"
                  Height="32"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Left" Grid.Column="1"
                  Checked="ThemeToggle_Checked"
                  Unchecked="ThemeToggle_Unchecked" Margin="48,0,0,0"/>

        <!-- Toolbar -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left"
                Margin="0,10,0,10" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2">
            <Button Content="Save" Width="80" Height="28" Margin="0,0,8,0"
                    Click="SaveButton_Click"/>
            <Button Content="Load" Width="80" Height="28" Margin="0,0,8,0"
                    Click="LoadButton_Click"/>
            <Button Content="Insert Sample" Width="120" Height="28"
                     Click="SampleButton_Click"/>
        </StackPanel>

        <!-- Input: shadow as separate layer behind the card -->
        <Grid Grid.Row="2" Grid.ColumnSpan="2" Margin="0,0,0,10" SnapsToDevicePixels="True">
            <!-- shadow rectangle behind -->
            <Rectangle RadiusX="8" RadiusY="8" Fill="#33000000" Margin="0,6,0,0" IsHitTestVisible="False">
                <Rectangle.Effect>
                    <BlurEffect Radius="12"/>
                </Rectangle.Effect>
            </Rectangle>

            <!-- actual card (no Effect) -->
            <Border Background="{DynamicResource TextBoxBackground}"
                    BorderBrush="{DynamicResource TextBoxBorder}"
                    BorderThickness="1"
                    CornerRadius="8"
                    SnapsToDevicePixels="True">
                <TextBox x:Name="CodeInput"
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="14"
                         Padding="12"
                         Background="Transparent"
                         BorderThickness="0"
                         UseLayoutRounding="True"
                         SnapsToDevicePixels="True"
                         TextOptions.TextFormattingMode="Display"
                         TextOptions.TextRenderingMode="ClearType"/>
            </Border>
        </Grid>

        <!-- Analyze Button -->
        <Button x:Name="AnalyzeButton"
            Content="Analyze Code"
            Grid.Row="3" Grid.ColumnSpan="2"
            Width="160" Height="40"
            HorizontalAlignment="Center"
            Margin="0,0,0,10"
            Click="Buttonn_Click"/>

        <!-- Output: shadow behind the card -->
        <Grid Grid.Row="4" Grid.ColumnSpan="2" Margin="0,0,0,10" SnapsToDevicePixels="True">
            <Rectangle RadiusX="8" RadiusY="8" Fill="#33000000" Margin="0,6,0,0" IsHitTestVisible="False">
                <Rectangle.Effect>
                    <BlurEffect Radius="12"/>
                </Rectangle.Effect>
            </Rectangle>

            <Border Background="{DynamicResource TextBoxBackground}"
                    BorderBrush="{DynamicResource TextBoxBorder}"
                    BorderThickness="1"
                    CornerRadius="8"
                    SnapsToDevicePixels="True">
                <TextBox x:Name="OutputBox"
                         AcceptsReturn="True"
                         IsReadOnly="True"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="14"
                         Padding="12"
                         Background="Transparent"
                         BorderThickness="0"
                         UseLayoutRounding="True"
                         SnapsToDevicePixels="True"
                         TextOptions.TextFormattingMode="Display"
                         TextOptions.TextRenderingMode="ClearType"/>
            </Border>
        </Grid>
    </Grid>

</Window>